<h2 mat-dialog-title>{{ 'FEEDBACKS.TITLE' | translate }}</h2>

<mat-dialog-content style="padding-top: 0;">
  <form [formGroup]="form">  

    <p>{{ 'FEEDBACKS.INTRO' | translate }}</p>

    <p><strong>{{ 'FEEDBACKS.QUESTION1' | translate }}</strong></p>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; margin-top: 1rem;">
      @for (module of modules; track $index) {
        <mat-form-field appearance="outline" class="field-full-width">
          <mat-label>{{ 'FEEDBACKS.MODULE' | translate }} {{ $index + 1 }}</mat-label>
          <mat-select [formControlName]="'content-' + module.confingModuleId" required>
            @for (item of ratings; track $index) {
              <mat-option [value]="item">{{ item | translate }}</mat-option>
            }          
          </mat-select>
        </mat-form-field>
      }
    </div>

    <p><strong>{{ 'FEEDBACKS.QUESTION2' | translate }}</strong></p>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; margin-top: 1rem;">
      @for (module of modules; track $index) {
        <mat-form-field appearance="outline" class="field-full-width">
          <mat-label>{{ 'FEEDBACKS.MODULE' | translate }} {{ $index + 1 }}</mat-label>
          <mat-select [formControlName]="'appearance-' + module.confingModuleId" required>
            @for (item of ratings; track $index) {
              <mat-option [value]="item">{{ item | translate }}</mat-option>
            }          
          </mat-select>
        </mat-form-field>
      }
    </div>

    <p><strong>{{ 'FEEDBACKS.QUESTION3' | translate }}</strong></p>
    @for (aspect of aspects; track $index) {
      <div style="display: flex; flex-direction: column;">
        <label>{{ aspect.label | translate }}</label>
        <mat-radio-group [formControlName]="aspect.control" class="example-radio-group">
          @for (r of ratings; track $index) {
            <mat-radio-button class="example-radio-button" [value]="r">{{ r | translate }}</mat-radio-button>
          }        
        </mat-radio-group>
      </div>
    }    

    <p><strong>{{ 'FEEDBACKS.QUESTION4' | translate }}</strong></p>
    <mat-form-field appearance="outline" class="field-full-width">
      <mat-label>{{ 'FEEDBACKS.ERRORS_LABEL' | translate }}</mat-label>
      <textarea matInput formControlName="errors" rows="2"></textarea>
    </mat-form-field>

    <p><strong>{{ 'FEEDBACKS.QUESTION5' | translate }}</strong></p>
    <mat-form-field appearance="outline" class="field-full-width">
      <mat-label>{{ 'FEEDBACKS.COMMENTS_LABEL' | translate }}</mat-label>
      <textarea matInput formControlName="additionalComments" rows="3"></textarea>
    </mat-form-field>

  </form>
</mat-dialog-content> 

<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>{{ 'FEEDBACKS.CANCEL' | translate }}</button>
  <button mat-flat-button color="primary" [disabled]="form.invalid" (click)="submitFeedback()">
    {{ 'FEEDBACKS.SEND' | translate }}
  </button>
</mat-dialog-actions>
